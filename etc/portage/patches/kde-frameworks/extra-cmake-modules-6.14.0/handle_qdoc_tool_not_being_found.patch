From e54526054fe5f3f4b7a960bd34ba617e02bf08fb Mon Sep 17 00:00:00 2001
From: Nicolas Fella <nicolas.fella@gmx.de>
Date: Sat, 3 May 2025 20:10:30 +0200
Subject: [PATCH] [ECMGenerateQDoc] Handle qdoc tool not being found

---
 modules/ECMGenerateQDoc.cmake | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/modules/ECMGenerateQDoc.cmake b/modules/ECMGenerateQDoc.cmake
index 4ffbe836..16078b22 100644
--- a/modules/ECMGenerateQDoc.cmake
+++ b/modules/ECMGenerateQDoc.cmake
@@ -71,6 +71,10 @@ function(ecm_generate_qdoc target qdocconf_file)
     set(qdoc_extra_args "")
 
     if (NOT QDOC_BIN)
+        if (NOT TARGET Qt6::qdoc)
+            message("qdoc executable not found, not generating API documentation")
+            return()
+        endif()
         get_target_property(QDOC_BIN Qt6::qdoc LOCATION)
     endif()
 
-- 
GitLab

